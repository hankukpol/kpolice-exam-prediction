# 08. ê²½ìŸë ¥ ê°•í™” ì‹ ê·œ ê¸°ëŠ¥ ê°œë°œ ê³„íšì„œ

> ì‘ì„±ì¼: 2026-02-21
> ëŒ€ìƒ: `police/` (ê²½ì°° í•©ê²©ì˜ˆì¸¡ 1ë‹¨ê³„)
> ê·¼ê±°: ê²½ìŸì‚¬(ê²½ë‹¨ê¸°Â·í•´ì»¤ìŠ¤Â·ì—ë“€ìœŒÂ·ìœŒë¹„ìŠ¤) ë¹„êµ ë¶„ì„ ê²°ê³¼ ë„ì¶œëœ ê°œì„  í•­ëª©

---

## ê°œë°œ ëŒ€ìƒ ê¸°ëŠ¥ ìš”ì•½

| ë²ˆí˜¸ | ê¸°ëŠ¥ëª… | ìš°ì„ ìˆœìœ„ | ì‹œê¸° |
|------|--------|---------|------|
| F-01 | ì •ë‹µí‚¤ ë³€ê²½ ì•Œë¦¼ + ì¬ì±„ì  ê²°ê³¼ ë¹„êµ | **ë†’ìŒ** | ì¦‰ì‹œ |
| F-02 | ë‹¨ê³„ë³„ í•©ê²©ì»· ë°œí‘œ ì‹œìŠ¤í…œ (1ì°¨~4ì°¨) | **ë†’ìŒ** | ì¦‰ì‹œ |
| F-03 | SNS ê²°ê³¼ ê³µìœ  ê¸°ëŠ¥ | **ë†’ìŒ** | ì¦‰ì‹œ |
| F-04 | í•©ê²©ì»· ë³€ë™ ì¶”ì´ ê·¸ë˜í”„ | **ì¤‘ê°„** | ì¦‰ì‹œ |
| F-05 | ë¬¸í•­ë³„ ì •ë‹µë¥  + ê³ ë‚œë„ ë¬¸í•­ ë¶„ì„ | **ì¤‘ê°„** | ì¦‰ì‹œ |
| F-06 | ìµœì¢…í•©ê²©ì˜ˆì¸¡ (ì²´ë ¥+ë©´ì ‘ ë°˜ì˜) | **ì¤‘ê°„** | **ì¶”í›„** |

---

## F-01. ì •ë‹µí‚¤ ë³€ê²½ ì•Œë¦¼ + ì¬ì±„ì  ê²°ê³¼ ë¹„êµ

### 1.1 í˜„ì¬ ìƒíƒœ ë¶„ì„

**êµ¬í˜„ë˜ì–´ ìˆëŠ” ê²ƒ:**
- `AnswerKeyLog` í…Œì´ë¸”ì— ì •ë‹µ ë³€ê²½ ì´ë ¥ ì™„ë²½ ê¸°ë¡ (oldAnswer â†’ newAnswer, changedBy, createdAt)
- `rescoreExam()` ë°°ì¹˜ ì¬ì±„ì  ì—”ì§„ (100ê±´ì”© íŠ¸ëœì­ì…˜)
- ê´€ë¦¬ì ë¯¸ë¦¬ë³´ê¸° (ë³€ê²½ ì „ ì ìˆ˜ ìƒìŠ¹/í•˜ë½/ë³€ë™ ì—†ìŒ ê±´ìˆ˜ í‘œì‹œ)

**ë¯¸êµ¬í˜„:**
- ì‚¬ìš©ìì—ê²Œ ì ìˆ˜ ë³€ë™ ì‚¬ì‹¤ì„ ì•Œë ¤ì£¼ëŠ” ê¸°ëŠ¥ ì—†ìŒ
- ì¬ì±„ì  ì „/í›„ ì ìˆ˜ ë¹„êµ ë°ì´í„° ì €ì¥ ì—†ìŒ
- ë³€ê²½ ë¬¸í•­ ìƒì„¸ + ë‚´ ì ìˆ˜ ë³€ë™ ë‚´ì—­ì„ ë³¼ ìˆ˜ ìˆëŠ” í™”ë©´ ì—†ìŒ

### 1.2 DB ìŠ¤í‚¤ë§ˆ ì¶”ê°€

```prisma
// ì¬ì±„ì  ì´ë²¤íŠ¸ (1íšŒ ì¬ì±„ì  = 1í–‰)
model RescoreEvent {
  id          Int      @id @default(autoincrement())
  examId      Int
  examType    ExamType
  reason      String?  @db.Text   // ê´€ë¦¬ìê°€ ì…ë ¥í•œ ë³€ê²½ ì‚¬ìœ  (ì„ íƒ)
  summary     String   @db.Text   // JSON: ë³€ê²½ ë¬¸í•­ ëª©ë¡ ìš”ì•½
  createdBy   Int                 // ê´€ë¦¬ì ID
  createdAt   DateTime @default(now())

  exam        Exam     @relation(fields: [examId], references: [id])
  admin       User     @relation(fields: [createdBy], references: [id])
  details     RescoreDetail[]

  @@index([examId, createdAt])
}

// ì¬ì±„ì  ìƒì„¸ (ì‚¬ìš©ìë³„ ì ìˆ˜ ë³€ë™)
model RescoreDetail {
  id              Int      @id @default(autoincrement())
  rescoreEventId  Int
  submissionId    Int
  userId          Int
  oldTotalScore   Float    // ë³€ê²½ ì „ ì›ì ìˆ˜
  newTotalScore   Float    // ë³€ê²½ í›„ ì›ì ìˆ˜
  oldFinalScore   Float    // ë³€ê²½ ì „ ìµœì¢…ì ìˆ˜
  newFinalScore   Float    // ë³€ê²½ í›„ ìµœì¢…ì ìˆ˜
  oldRank         Int?     // ë³€ê²½ ì „ ìˆœìœ„ (ê³„ì‚° ê°€ëŠ¥ ì‹œ)
  newRank         Int?     // ë³€ê²½ í›„ ìˆœìœ„
  scoreDelta      Float    // ì ìˆ˜ ë³€ë™ëŸ‰ (newFinal - oldFinal)
  isRead          Boolean  @default(false)  // ì‚¬ìš©ìê°€ í™•ì¸í–ˆëŠ”ì§€
  createdAt       DateTime @default(now())

  rescoreEvent    RescoreEvent @relation(fields: [rescoreEventId], references: [id])
  submission      Submission   @relation(fields: [submissionId], references: [id])
  user            User         @relation(fields: [userId], references: [id])

  @@unique([rescoreEventId, submissionId])
  @@index([userId, isRead])
  @@index([submissionId])
}
```

### 1.3 ì¬ì±„ì  ì—”ì§„ ìˆ˜ì • (`src/lib/scoring.ts`)

ê¸°ì¡´ `rescoreExam()` í•¨ìˆ˜ë¥¼ í™•ì¥í•˜ì—¬ ì ìˆ˜ ë³€ë™ ê¸°ë¡ ì €ì¥:

```typescript
// ê¸°ì¡´: rescoreExam(examId: number): Promise<number>
// ë³€ê²½: rescoreExam(examId: number, options?: RescoreOptions): Promise<RescoreResult>

interface RescoreOptions {
  reason?: string;         // ë³€ê²½ ì‚¬ìœ 
  adminUserId: number;     // ê´€ë¦¬ì ID
  examType: ExamType;      // ê³µì±„/ê²½í–‰ê²½ì±„
  changedQuestions: Array<{  // ë³€ê²½ëœ ë¬¸í•­ ëª©ë¡
    subjectName: string;
    questionNumber: number;
    oldAnswer: number | null;
    newAnswer: number;
  }>;
}

interface RescoreResult {
  rescoredCount: number;
  rescoreEventId: number;
  scoreChanges: {
    increased: number;    // ì ìˆ˜ ìƒìŠ¹ ì¸ì›
    decreased: number;    // ì ìˆ˜ í•˜ë½ ì¸ì›
    unchanged: number;    // ë³€ë™ ì—†ìŒ ì¸ì›
  };
}
```

**ìˆ˜ì • ë¡œì§:**
1. `RescoreEvent` ìƒì„± (ì¬ì±„ì  ì´ë²¤íŠ¸ 1ê±´)
2. ë°°ì¹˜ ì¬ì±„ì  ë£¨í”„ ë‚´ì—ì„œ ê° ì œì¶œë³„ ë³€ê²½ ì „ ì ìˆ˜ ê¸°ë¡
3. ì¬ì±„ì  í›„ `RescoreDetail` ì¼ê´„ ì €ì¥ (ë³€ê²½ ì „/í›„ ì ìˆ˜, ë³€ë™ëŸ‰)
4. `isRead: false`ë¡œ ì´ˆê¸°í™” â†’ ì‚¬ìš©ì ì•Œë¦¼ ëŒ€ìƒ

### 1.4 ì•Œë¦¼ API

#### `GET /api/notifications/rescore`

ì‚¬ìš©ìê°€ ì½ì§€ ì•Šì€ ì¬ì±„ì  ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ.

```typescript
interface RescoreNotification {
  rescoreEventId: number;
  examName: string;
  createdAt: string;
  reason: string | null;
  changedQuestions: Array<{
    subjectName: string;
    questionNumber: number;
    oldAnswer: number | null;
    newAnswer: number;
  }>;
  myScoreChange: {
    oldTotalScore: number;
    newTotalScore: number;
    oldFinalScore: number;
    newFinalScore: number;
    scoreDelta: number;
    oldRank: number | null;
    newRank: number | null;
  };
}

// ì‘ë‹µ
interface RescoreNotificationResponse {
  unreadCount: number;
  notifications: RescoreNotification[];
}
```

#### `POST /api/notifications/rescore/read`

ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬.

```typescript
// ìš”ì²­: { rescoreEventId: number }
// ì²˜ë¦¬: RescoreDetail.isRead = true (í•´ë‹¹ ì‚¬ìš©ì)
```

### 1.5 ì‚¬ìš©ì í™”ë©´

#### ì•Œë¦¼ ë±ƒì§€ (ExamTabNavigation ë˜ëŠ” í—¤ë”)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [í’€ì„œë¹„ìŠ¤ ë©”ì¸] [ë¹ ë¥¸ ì±„ì ] [ì±„ì ê²°ê³¼ ë¶„ì„] [í•©ê²©ì˜ˆì¸¡] [ëŒ“ê¸€]  â”‚
â”‚                                              ğŸ”” (1)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- í—¤ë” ìš°ì¸¡ì— ì¢… ì•„ì´ì½˜ + ë¯¸ì½ì€ ì•Œë¦¼ ìˆ˜ ë±ƒì§€
- í´ë¦­ ì‹œ ì•Œë¦¼ íŒ¨ë„/ëª¨ë‹¬ ì—´ê¸°

#### ì•Œë¦¼ ìƒì„¸ í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”” ì •ë‹µí‚¤ ë³€ê²½ ì•Œë¦¼                                      â”‚
â”‚                                                         â”‚
â”‚  2026.03.15 14:30 â€” ê°€ë‹µì•ˆ â†’ í™•ì •ë‹µì•ˆ ë³€ê²½                â”‚
â”‚  ì‚¬ìœ : í—Œë²• 12ë²ˆ, í˜•ì‚¬ë²• 28ë²ˆ ì •ë‹µ ì •ì •                     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ë³€ê²½ ë¬¸í•­                                         â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  í—Œë²• 12ë²ˆ: ì •ë‹µ â‘¡ â†’ â‘¢                            â”‚   â”‚
â”‚  â”‚    ë‚´ ë‹µ: â‘¢ â€” ì˜¤ë‹µ â†’ ì •ë‹µ (âœ… +2.5ì )              â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  í˜•ì‚¬ë²• 28ë²ˆ: ì •ë‹µ â‘£ â†’ â‘                            â”‚   â”‚
â”‚  â”‚    ë‚´ ë‹µ: â‘£ â€” ì •ë‹µ â†’ ì˜¤ë‹µ (âŒ -2.5ì )              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ë‚´ ì ìˆ˜ ë³€ë™                                       â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  ì›ì ìˆ˜:    217.5ì   â†’  217.5ì   (ë³€ë™ ì—†ìŒ)        â”‚   â”‚
â”‚  â”‚  ìµœì¢…ì ìˆ˜:  217.5ì   â†’  217.5ì   (ë³€ë™ ì—†ìŒ)        â”‚   â”‚
â”‚  â”‚  ìˆœìœ„:      23ë“±    â†’  23ë“±     (ë³€ë™ ì—†ìŒ)         â”‚   â”‚
â”‚  â”‚  í•©ê²©ë“±ê¸‰:  í™•ì‹¤ê¶Œ   â†’  í™•ì‹¤ê¶Œ   (ë³€ë™ ì—†ìŒ)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚                              [í™•ì¸] (ì½ìŒ ì²˜ë¦¬)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.6 ê´€ë¦¬ì í™”ë©´ ìˆ˜ì •

ê¸°ì¡´ ì •ë‹µ ì €ì¥ íë¦„ì— **ë³€ê²½ ì‚¬ìœ  ì…ë ¥** ë‹¨ê³„ ì¶”ê°€:

```
[ë¯¸ë¦¬ë³´ê¸° ê²°ê³¼ í™•ì¸]
    â†“
[ë³€ê²½ ì‚¬ìœ  ì…ë ¥ (ì„ íƒ)] â€” textarea
  ì˜ˆ: "í—Œë²• 12ë²ˆ ì¶œì œ ì˜¤ë¥˜ ì •ì •", "ê°€ë‹µì•ˆâ†’í™•ì •ë‹µì•ˆ ë°˜ì˜"
    â†“
[ìµœì¢… í™•ì¸ ë° ì €ì¥]
```

### 1.7 íŒŒì¼ ë³€ê²½ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|---------|
| `prisma/schema.prisma` | RescoreEvent, RescoreDetail ëª¨ë¸ ì¶”ê°€ |
| `src/lib/scoring.ts` | rescoreExam() í™•ì¥ â€” ë³€ë™ ê¸°ë¡ ì €ì¥ |
| `src/app/api/admin/answers/route.ts` | ë³€ê²½ ì‚¬ìœ  íŒŒë¼ë¯¸í„° ì¶”ê°€, RescoreEvent ìƒì„± |
| `src/app/api/notifications/rescore/route.ts` | **ì‹ ê·œ** â€” ì•Œë¦¼ ì¡°íšŒ API |
| `src/app/api/notifications/rescore/read/route.ts` | **ì‹ ê·œ** â€” ì½ìŒ ì²˜ë¦¬ API |
| `src/components/layout/NotificationBell.tsx` | **ì‹ ê·œ** â€” ì•Œë¦¼ ë±ƒì§€ ì»´í¬ë„ŒíŠ¸ |
| `src/components/notification/RescoreNotificationModal.tsx` | **ì‹ ê·œ** â€” ì•Œë¦¼ ìƒì„¸ ëª¨ë‹¬ |
| `src/app/admin/answers/page.tsx` | ë³€ê²½ ì‚¬ìœ  ì…ë ¥ í•„ë“œ ì¶”ê°€ |

---

## F-02. ë‹¨ê³„ë³„ í•©ê²©ì»· ë°œí‘œ ì‹œìŠ¤í…œ (1ì°¨~4ì°¨)

### 2.1 ê°œìš”

ê²½ë‹¨ê¸°ì˜ í•µì‹¬ ì°¨ë³„í™” ê¸°ëŠ¥. ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ì°¸ì—¬ìê°€ ì¦ê°€í•˜ë©´ì„œ í•©ê²©ì»· ì˜ˆì¸¡ì´ ì ì§„ì ìœ¼ë¡œ ì •í™•í•´ì§.
ê´€ë¦¬ìê°€ "Nì°¨ ì»· ë°œí‘œ" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ ì‹œì ì˜ í•©ê²©ì»· ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•˜ê³ , ì‚¬ìš©ìì—ê²Œ ê³µì§€.

### 2.2 DB ìŠ¤í‚¤ë§ˆ ì¶”ê°€

```prisma
// í•©ê²©ì»· ë°œí‘œ ì´ë²¤íŠ¸
model PassCutRelease {
  id              Int      @id @default(autoincrement())
  examId          Int
  releaseNumber   Int      // 1ì°¨, 2ì°¨, 3ì°¨, 4ì°¨
  releasedAt      DateTime @default(now())
  participantCount Int     // ë°œí‘œ ì‹œì  ì´ ì°¸ì—¬ì ìˆ˜
  createdBy       Int      // ê´€ë¦¬ì ID
  memo            String?  @db.Text  // ê´€ë¦¬ì ë©”ëª¨

  exam            Exam     @relation(fields: [examId], references: [id])
  admin           User     @relation(fields: [createdBy], references: [id])
  snapshots       PassCutSnapshot[]

  @@unique([examId, releaseNumber])
  @@index([examId])
}

// í•©ê²©ì»· ìŠ¤ëƒ…ìƒ· (ì§€ì—­Ã—ì±„ìš©ìœ í˜•ë³„ 1í–‰)
model PassCutSnapshot {
  id                  Int      @id @default(autoincrement())
  passCutReleaseId    Int
  regionId            Int
  examType            ExamType
  participantCount    Int      // í•´ë‹¹ ì§€ì—­+ìœ í˜• ì°¸ì—¬ì ìˆ˜
  recruitCount        Int      // ëª¨ì§‘ì¸ì›
  averageScore        Float?   // í‰ê· ì ìˆ˜
  oneMultipleCutScore Float?   // 1ë°°ìˆ˜ ì»·
  sureMinScore        Float?   // í™•ì‹¤ê¶Œ ìµœì†Œì ìˆ˜
  likelyMinScore      Float?   // ìœ ë ¥ê¶Œ ìµœì†Œì ìˆ˜
  possibleMinScore    Float?   // ê°€ëŠ¥ê¶Œ ìµœì†Œì ìˆ˜

  passCutRelease  PassCutRelease @relation(fields: [passCutReleaseId], references: [id])
  region          Region         @relation(fields: [regionId], references: [id])

  @@unique([passCutReleaseId, regionId, examType])
  @@index([passCutReleaseId])
}
```

### 2.3 ê´€ë¦¬ì API

#### `POST /api/admin/pass-cut-release`

í•©ê²©ì»· Nì°¨ ë°œí‘œ ì‹¤í–‰.

```typescript
// ìš”ì²­
interface PassCutReleaseRequest {
  examId: number;
  releaseNumber: number;  // 1~4
  memo?: string;
}

// ì²˜ë¦¬ ë¡œì§
async function createPassCutRelease(req) {
  // 1. ì¤‘ë³µ ë°œí‘œ í™•ì¸ (ê°™ì€ examId + releaseNumber ì¡´ì¬ ì‹œ ì—ëŸ¬)
  // 2. í˜„ì¬ ì‹œì ì˜ ëª¨ë“  ì§€ì—­Ã—ì±„ìš©ìœ í˜• í•©ê²©ì»· ê³„ì‚°
  //    â†’ ê¸°ì¡´ main-stats ë¡œì§ í™œìš©
  // 3. PassCutRelease 1í–‰ + PassCutSnapshot Ní–‰ ì¼ê´„ ì €ì¥
  // 4. (ì„ íƒ) ê³µì§€ì‚¬í•­ ìë™ ë“±ë¡: "{N}ì°¨ í•©ê²©ì»·ì´ ë°œí‘œë˜ì—ˆìŠµë‹ˆë‹¤."
}

// ì‘ë‹µ
interface PassCutReleaseResponse {
  releaseId: number;
  releaseNumber: number;
  releasedAt: string;
  participantCount: number;
  snapshotCount: number;  // ì €ì¥ëœ ìŠ¤ëƒ…ìƒ· ìˆ˜ (ì§€ì—­Ã—ìœ í˜•)
}
```

#### `GET /api/admin/pass-cut-release`

ë°œí‘œ ì´ë ¥ ì¡°íšŒ.

```typescript
// ì¿¼ë¦¬: ?examId=1
// ì‘ë‹µ: PassCutRelease[] (releaseNumber ì˜¤ë¦„ì°¨ìˆœ)
```

### 2.4 ì‚¬ìš©ì API

#### `GET /api/pass-cut-history`

í•©ê²©ì»· ë°œí‘œ ì´ë ¥ + ìŠ¤ëƒ…ìƒ· ì¡°íšŒ.

```typescript
// ì¿¼ë¦¬: ?examId=1&regionId=3&examType=PUBLIC
// ì‘ë‹µ
interface PassCutHistoryResponse {
  releases: Array<{
    releaseNumber: number;
    releasedAt: string;
    totalParticipantCount: number;
    snapshot: {
      participantCount: number;
      recruitCount: number;
      averageScore: number | null;
      oneMultipleCutScore: number | null;
      sureMinScore: number | null;
      likelyMinScore: number | null;
      possibleMinScore: number | null;
    } | null;  // í•´ë‹¹ ì§€ì—­ ë°ì´í„° ì—†ìœ¼ë©´ null
  }>;
  current: {
    // í˜„ì¬ ì‹¤ì‹œê°„ ë°ì´í„° (ë°œí‘œ ì´ë ¥ê³¼ ë³„ë„)
    participantCount: number;
    averageScore: number | null;
    oneMultipleCutScore: number | null;
    sureMinScore: number | null;
    likelyMinScore: number | null;
    possibleMinScore: number | null;
  };
}
```

### 2.5 ì‚¬ìš©ì í™”ë©´

#### í’€ì„œë¹„ìŠ¤ ë©”ì¸ ë˜ëŠ” í•©ê²©ì˜ˆì¸¡ ë¶„ì„ í˜ì´ì§€ ë‚´ ì„¹ì…˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í•©ê²©ì»· ë°œí‘œ í˜„í™©                            ëŒ€êµ¬ - ê³µì±„  â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚       â”‚ 1ì°¨ ë°œí‘œ  â”‚ 2ì°¨ ë°œí‘œâ”‚ 3ì°¨ ë°œí‘œ â”‚ í˜„ì¬     â”‚      â”‚
â”‚  â”‚       â”‚ 3/14     â”‚ 3/14   â”‚ 3/15    â”‚ ì‹¤ì‹œê°„   â”‚      â”‚
â”‚  â”‚       â”‚ 14:00    â”‚ 18:00  â”‚ 12:00   â”‚         â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ì°¸ì—¬ì  â”‚   312ëª…  â”‚  589ëª… â”‚  847ëª…  â”‚  923ëª…  â”‚      â”‚
â”‚  â”‚í™•ì‹¤ê¶Œ  â”‚ 220.0â†‘  â”‚ 217.5â†‘ â”‚ 218.0â†‘  â”‚ 217.5â†‘  â”‚      â”‚
â”‚  â”‚ìœ ë ¥ê¶Œ  â”‚ 215.0â†‘  â”‚ 212.5â†‘ â”‚ 213.5â†‘  â”‚ 213.0â†‘  â”‚      â”‚
â”‚  â”‚ê°€ëŠ¥ê¶Œ  â”‚ 210.0â†‘  â”‚ 207.5â†‘ â”‚ 208.0â†‘  â”‚ 208.0â†‘  â”‚      â”‚
â”‚  â”‚1ë°°ìˆ˜ì»· â”‚ 220.0   â”‚ 217.5  â”‚ 218.0   â”‚ 217.5   â”‚      â”‚
â”‚  â”‚í‰ê· ì   â”‚ 185.3   â”‚ 189.6  â”‚ 190.2   â”‚ 190.8   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                          â”‚
â”‚  â€» ì°¸ì—¬ì¸ì› ì¦ê°€ì— ë”°ë¼ ì˜ˆì¸¡ ì •í™•ë„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤            â”‚
â”‚  â€» 4ì°¨ ë°œí‘œëŠ” í•©ê²©ë°œí‘œ ì „ì¼ ì˜ˆì •ì…ë‹ˆë‹¤                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.6 ê´€ë¦¬ì í™”ë©´

ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë˜ëŠ” ë³„ë„ ë©”ë‰´ì— "í•©ê²©ì»· ë°œí‘œ" ë²„íŠ¼:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í•©ê²©ì»· ë°œí‘œ ê´€ë¦¬                                          â”‚
â”‚                                                          â”‚
â”‚  í˜„ì¬ í™œì„± ì‹œí—˜: 2026ë…„ ì œ1ì°¨ ê²½ì°° ìˆœê²½                     â”‚
â”‚  í˜„ì¬ ì°¸ì—¬ì: 923ëª… (ê³µì±„ 812ëª…, ê²½í–‰ê²½ì±„ 111ëª…)            â”‚
â”‚                                                          â”‚
â”‚  ë°œí‘œ ì´ë ¥:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ì°¨ìˆ˜â”‚ ë°œí‘œì¼ì‹œ           â”‚ì°¸ì—¬ì   â”‚ë°œí‘œì     â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ 1ì°¨â”‚ 2026-03-14 14:00 â”‚ 312ëª…  â”‚ ê´€ë¦¬ì   â”‚           â”‚
â”‚  â”‚ 2ì°¨â”‚ 2026-03-14 18:00 â”‚ 589ëª…  â”‚ ê´€ë¦¬ì   â”‚           â”‚
â”‚  â”‚ 3ì°¨â”‚ 2026-03-15 12:00 â”‚ 847ëª…  â”‚ ê´€ë¦¬ì   â”‚           â”‚
â”‚  â”‚ 4ì°¨â”‚ (ë¯¸ë°œí‘œ)          â”‚   -    â”‚    -     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                          â”‚
â”‚  ë°œí‘œ ë©”ëª¨: [                                  ]          â”‚
â”‚                                                          â”‚
â”‚           [3ì°¨ í•©ê²©ì»· ë°œí‘œí•˜ê¸°]                             â”‚
â”‚                                                          â”‚
â”‚  â€» ë°œí‘œ ì‹œ í˜„ì¬ ì‹œì ì˜ ëª¨ë“  ì§€ì—­ë³„ í•©ê²©ì»·ì´ ìŠ¤ëƒ…ìƒ· ì €ì¥ë©ë‹ˆë‹¤  â”‚
â”‚  â€» ë™ì‹œì— ê³µì§€ì‚¬í•­ì´ ìë™ ë“±ë¡ë©ë‹ˆë‹¤                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.7 íŒŒì¼ ë³€ê²½ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|---------|
| `prisma/schema.prisma` | PassCutRelease, PassCutSnapshot ëª¨ë¸ ì¶”ê°€ |
| `src/app/api/admin/pass-cut-release/route.ts` | **ì‹ ê·œ** â€” í•©ê²©ì»· ë°œí‘œ API (POST, GET) |
| `src/app/api/pass-cut-history/route.ts` | **ì‹ ê·œ** â€” ì‚¬ìš©ììš© ë°œí‘œ ì´ë ¥ API |
| `src/app/admin/pass-cut/page.tsx` | **ì‹ ê·œ** â€” ê´€ë¦¬ì í•©ê²©ì»· ë°œí‘œ í˜ì´ì§€ |
| `src/components/prediction/PassCutHistoryTable.tsx` | **ì‹ ê·œ** â€” ë°œí‘œ ì´ë ¥ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸ |
| `src/components/admin/AdminSidebar.tsx` | ë©”ë‰´ í•­ëª© ì¶”ê°€: "í•©ê²©ì»· ë°œí‘œ" |

---

## F-03. SNS ê²°ê³¼ ê³µìœ  ê¸°ëŠ¥

### 3.1 ê°œìš”

ì‚¬ìš©ìê°€ ìì‹ ì˜ ì±„ì ê²°ê³¼/í•©ê²©ì˜ˆì¸¡ ê²°ê³¼ë¥¼ ì¹´ì¹´ì˜¤í†¡Â·ë§í¬ ë³µì‚¬ ë“±ìœ¼ë¡œ ê³µìœ .
ë°”ì´ëŸ´ ë§ˆì¼€íŒ… íš¨ê³¼ë¡œ ì„œë¹„ìŠ¤ ì°¸ì—¬ì ìœ ì… ì¦ê°€ ê¸°ëŒ€.

### 3.2 ê³µìœ  ë°©ì‹

| ë°©ì‹ | êµ¬í˜„ | ì„¤ëª… |
|------|------|------|
| **ë§í¬ ë³µì‚¬** | `navigator.clipboard` | ê°€ì¥ ê¸°ë³¸, ëª¨ë“  í™˜ê²½ ì§€ì› |
| **ì¹´ì¹´ì˜¤í†¡ ê³µìœ ** | Kakao JS SDK | í•œêµ­ ì‚¬ìš©ì ëŒ€ë¶€ë¶„ ì‚¬ìš© |
| **ì´ë¯¸ì§€ ì €ì¥** | `html2canvas` â†’ PNG | ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ë“±ì— ì§ì ‘ ì—…ë¡œë“œ |

### 3.3 ê³µìœ  ì½˜í…ì¸  êµ¬ì„±

#### ê³µìœ  ì¹´ë“œ ë””ìì¸ (ì´ë¯¸ì§€ ìƒì„±ìš©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  ğŸ› 2026 ê²½ì°° í•©ê²©ì˜ˆì¸¡               â”‚
â”‚                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                      â”‚
â”‚  ê¹€OOë‹˜ì˜ ì˜ˆì¸¡ ê²°ê³¼                   â”‚
â”‚                                      â”‚
â”‚  ì±„ìš©ìœ í˜•    ê³µì±„                      â”‚
â”‚  ì§€ì—­       ëŒ€êµ¬                      â”‚
â”‚  ì´ì        217.5ì                    â”‚
â”‚  ìˆœìœ„       23ë“± / 596ëª…              â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     â˜… í•©ê²© í™•ì‹¤ê¶Œ â˜…            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  ë‚˜ë„ í™•ì¸í•˜ê¸° â†’                      â”‚
â”‚  daegu.koreapolice.co.kr/exam        â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ë°°ê²½: police í…Œë§ˆ ê·¸ë¼ë°ì´ì…˜ (ì§„í•œ ë‚¨ìƒ‰)
- í•©ê²©ë“±ê¸‰ë³„ ìƒ‰ìƒ: í™•ì‹¤ê¶Œ(ê¸ˆìƒ‰) / ìœ ë ¥ê¶Œ(ì´ˆë¡) / ê°€ëŠ¥ê¶Œ(íŒŒë‘) / ë„ì „ê¶Œ(íšŒìƒ‰)
- ì‚¬ì´íŠ¸ URL í¬í•¨ â†’ ìœ ì… ê²½ë¡œ

#### OG ë©”íƒ€íƒœê·¸ (ë§í¬ ê³µìœ  ì‹œ ë¯¸ë¦¬ë³´ê¸°)

```html
<!-- /exam/result ë˜ëŠ” /exam/prediction í˜ì´ì§€ì˜ ë™ì  OG -->
<meta property="og:title" content="ê²½ì°° í•©ê²©ì˜ˆì¸¡ ê²°ê³¼" />
<meta property="og:description" content="ë‚˜ì˜ ì˜ˆì¸¡ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!" />
<meta property="og:image" content="/api/share/og-image?submissionId=123" />
<meta property="og:url" content="https://daegu.koreapolice.co.kr/exam" />
```

### 3.4 API

#### `GET /api/share/og-image`

OG ì´ë¯¸ì§€ ë™ì  ìƒì„± (ì„œë²„ ì‚¬ì´ë“œ).

```typescript
// ì¿¼ë¦¬: ?submissionId=123&type=result|prediction
// ë°˜í™˜: PNG ì´ë¯¸ì§€ (1200Ã—630px, OG í‘œì¤€ í¬ê¸°)

// êµ¬í˜„ ë°©ì‹ ì˜µì…˜:
// A. @vercel/og (Satori ê¸°ë°˜) â€” ì¶”ì²œ, ì„œë²„ì—ì„œ SVGâ†’PNG ë³€í™˜
// B. puppeteer â€” ë¬´ê±°ì›€, ì„œë²„ ë¦¬ì†ŒìŠ¤ ë¶€ë‹´
// C. canvas ë¼ì´ë¸ŒëŸ¬ë¦¬ â€” node-canvas
```

**Satori ê¸°ë°˜ êµ¬í˜„ (ì¶”ì²œ):**
```typescript
import { ImageResponse } from "next/og";

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const submissionId = searchParams.get("submissionId");

  // 1. ì œì¶œ ë°ì´í„° ì¡°íšŒ (ì ìˆ˜, ìˆœìœ„, ë“±ê¸‰)
  // 2. JSX â†’ PNG ë³€í™˜
  return new ImageResponse(
    <ShareCard
      name={maskedName}
      examType={examType}
      region={regionName}
      totalScore={finalScore}
      rank={rank}
      grade={predictionGrade}
    />,
    { width: 1200, height: 630 }
  );
}
```

#### `GET /api/share/data`

ê³µìœ ìš© ìš”ì•½ ë°ì´í„° ì¡°íšŒ (í”„ë¡ íŠ¸ì—”ë“œ ê³µìœ  UIìš©).

```typescript
// ì¿¼ë¦¬: ?type=result|prediction
// ì‘ë‹µ
interface ShareData {
  maskedName: string;       // "ê¹€**"
  examType: string;         // "ê³µì±„"
  region: string;           // "ëŒ€êµ¬"
  totalScore: number;       // 217.5
  rank: number;             // 23
  totalParticipants: number;// 596
  predictionGrade: string;  // "í™•ì‹¤ê¶Œ"
  shareUrl: string;         // ì‚¬ì´íŠ¸ URL
  ogImageUrl: string;       // OG ì´ë¯¸ì§€ URL
}
```

### 3.5 ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ì—°ë™

```typescript
// ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™” (layout.tsx ë˜ëŠ” ë³„ë„ provider)
Kakao.init(KAKAO_JS_KEY);

// ê³µìœ  í•¨ìˆ˜
function shareToKakao(shareData: ShareData) {
  Kakao.Share.sendDefault({
    objectType: "feed",
    content: {
      title: "ê²½ì°° í•©ê²©ì˜ˆì¸¡ ê²°ê³¼",
      description: `${shareData.maskedName}ë‹˜ â€” ${shareData.examType} ${shareData.region} ${shareData.rank}ë“± (${shareData.predictionGrade})`,
      imageUrl: shareData.ogImageUrl,
      link: {
        mobileWebUrl: shareData.shareUrl,
        webUrl: shareData.shareUrl,
      },
    },
    buttons: [
      {
        title: "ë‚˜ë„ í™•ì¸í•˜ê¸°",
        link: {
          mobileWebUrl: shareData.shareUrl,
          webUrl: shareData.shareUrl,
        },
      },
    ],
  });
}
```

### 3.6 ì‚¬ìš©ì í™”ë©´ â€” ê³µìœ  ë²„íŠ¼

ì±„ì ê²°ê³¼ ë¶„ì„ í˜ì´ì§€ / í•©ê²©ì˜ˆì¸¡ ë¶„ì„ í˜ì´ì§€ ìƒë‹¨ì— ê³µìœ  ë²„íŠ¼ ê·¸ë£¹:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë‚´ ì˜ˆì¸¡ ê²°ê³¼                                [ê³µìœ í•˜ê¸° â–¼]  â”‚
â”‚                                                          â”‚
â”‚  (ê³µìœ  ë“œë¡­ë‹¤ìš´)                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ ğŸ”— ë§í¬ ë³µì‚¬      â”‚                                    â”‚
â”‚  â”‚ ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ê³µìœ    â”‚                                    â”‚
â”‚  â”‚ ğŸ“· ì´ë¯¸ì§€ ì €ì¥    â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.7 íŒŒì¼ ë³€ê²½ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|---------|
| `src/app/api/share/og-image/route.tsx` | **ì‹ ê·œ** â€” OG ì´ë¯¸ì§€ ë™ì  ìƒì„± |
| `src/app/api/share/data/route.ts` | **ì‹ ê·œ** â€” ê³µìœ  ë°ì´í„° ì¡°íšŒ |
| `src/components/share/ShareButton.tsx` | **ì‹ ê·œ** â€” ê³µìœ  ë²„íŠ¼ ë“œë¡­ë‹¤ìš´ |
| `src/components/share/ShareCard.tsx` | **ì‹ ê·œ** â€” ê³µìœ  ì¹´ë“œ ë””ìì¸ (OG ì´ë¯¸ì§€ìš©) |
| `src/lib/kakao.ts` | **ì‹ ê·œ** â€” ì¹´ì¹´ì˜¤ SDK ë˜í¼ |
| `src/app/exam/result/page.tsx` | ê³µìœ  ë²„íŠ¼ ì¶”ê°€ |
| `src/app/exam/prediction/page.tsx` | ê³µìœ  ë²„íŠ¼ ì¶”ê°€ |
| `.env` | KAKAO_JS_KEY ì¶”ê°€ |
| `package.json` | `html2canvas` ì˜ì¡´ì„± ì¶”ê°€ |

### 3.8 í™˜ê²½ ë³€ìˆ˜

```env
# ì¹´ì¹´ì˜¤ ê°œë°œì ì•± í‚¤ (JavaScript í‚¤)
NEXT_PUBLIC_KAKAO_JS_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

---

## F-04. í•©ê²©ì»· ë³€ë™ ì¶”ì´ ê·¸ë˜í”„

### 4.1 ê°œìš”

F-02(ë‹¨ê³„ë³„ í•©ê²©ì»· ë°œí‘œ)ì˜ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬, ì‹œê°„ì— ë”°ë¥¸ í•©ê²©ì»· ë³€ë™ì„ LineChartë¡œ ì‹œê°í™”.
ì¶”ê°€ë¡œ ì°¸ì—¬ì ìˆ˜ ì¦ê°€ ì¶”ì´ë„ í•¨ê»˜ í‘œì‹œ.

### 4.2 ë°ì´í„° ì†ŒìŠ¤

- **ë°œí‘œ ìŠ¤ëƒ…ìƒ·**: `PassCutSnapshot` í…Œì´ë¸” (F-02ì—ì„œ ì €ì¥)
- **í˜„ì¬ ì‹¤ì‹œê°„**: ê¸°ì¡´ `calculatePrediction()` ì‹¤ì‹œê°„ ê³„ì‚°

â†’ F-02ê°€ ì„ í–‰ êµ¬í˜„ë˜ì–´ì•¼ í•¨ (ì˜ì¡´ ê´€ê³„)

### 4.3 ì‚¬ìš©ì í™”ë©´

í•©ê²©ì˜ˆì¸¡ ë¶„ì„ í˜ì´ì§€ ë˜ëŠ” í’€ì„œë¹„ìŠ¤ ë©”ì¸ì— ë°°ì¹˜:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í•©ê²©ì»· ë³€ë™ ì¶”ì´                    ëŒ€êµ¬ - ê³µì±„          â”‚
â”‚                                                          â”‚
â”‚  250 â”¤                                                   â”‚
â”‚      â”‚                                                   â”‚
â”‚  225 â”¤  â”€â”€â”€â”€â”€â”€â”€â—                                         â”‚
â”‚      â”‚          â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â— â† í™•ì‹¤ê¶Œ           â”‚
â”‚  220 â”¤                                                   â”‚
â”‚      â”‚                                                   â”‚
â”‚  215 â”¤  â”€â”€â”€â”€â”€â”€â”€â—                                         â”‚
â”‚      â”‚          â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â— â† ìœ ë ¥ê¶Œ           â”‚
â”‚  210 â”¤                                                   â”‚
â”‚      â”‚  â”€â”€â”€â”€â”€â”€â”€â—                                         â”‚
â”‚  205 â”¤          â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â— â† ê°€ëŠ¥ê¶Œ           â”‚
â”‚      â”‚                                                   â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚        1ì°¨ë°œí‘œ   2ì°¨ë°œí‘œ  3ì°¨ë°œí‘œ  í˜„ì¬                    â”‚
â”‚        (312ëª…)  (589ëª…) (847ëª…) (923ëª…)                   â”‚
â”‚                                                          â”‚
â”‚  â”€â”€â”€ í™•ì‹¤ê¶Œ  â”€â”€â”€ ìœ ë ¥ê¶Œ  â”€â”€â”€ ê°€ëŠ¥ê¶Œ  --- ì°¸ì—¬ì ìˆ˜        â”‚
â”‚                                                          â”‚
â”‚  â€» ì°¸ì—¬ì ìˆ˜ê°€ ë§ì„ìˆ˜ë¡ ì˜ˆì¸¡ ì •í™•ë„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 ì°¨íŠ¸ ìŠ¤í™

```typescript
// Recharts ComposedChart (LineChart + BarChart í˜¼í•©)
// ì¢Œì¸¡ Yì¶•: ì ìˆ˜ (200~250 ë²”ìœ„, ë™ì )
// ìš°ì¸¡ Yì¶•: ì°¸ì—¬ì ìˆ˜
// Xì¶•: ë°œí‘œ ì°¨ìˆ˜ (1ì°¨, 2ì°¨, 3ì°¨, 4ì°¨, í˜„ì¬)

// ë¼ì¸ 3ê°œ:
// - í™•ì‹¤ê¶Œ ìµœì†Œì ìˆ˜: ì‹¤ì„ , ì´ˆë¡ìƒ‰
// - ìœ ë ¥ê¶Œ ìµœì†Œì ìˆ˜: ì‹¤ì„ , íŒŒë€ìƒ‰
// - ê°€ëŠ¥ê¶Œ ìµœì†Œì ìˆ˜: ì‹¤ì„ , ì£¼í™©ìƒ‰

// ë°” 1ê°œ:
// - ì°¸ì—¬ì ìˆ˜: ë°˜íˆ¬ëª… íšŒìƒ‰ ë§‰ëŒ€ (ìš°ì¸¡ Yì¶• ê¸°ì¤€)

// í¬ì¸íŠ¸ ë§ˆì»¤: ê° ë°œí‘œ ì‹œì ì— ì›í˜• ë§ˆì»¤
// íˆ´íŒ: í˜¸ë²„ ì‹œ ìƒì„¸ ë°ì´í„° í‘œì‹œ
```

### 4.5 API

ê¸°ì¡´ `GET /api/pass-cut-history` (F-02) ì‘ë‹µì„ í™œìš©.
ì¶”ê°€ API ë¶ˆí•„ìš” â€” í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì°¨íŠ¸ ë°ì´í„°ë¡œ ë³€í™˜.

### 4.6 íŒŒì¼ ë³€ê²½ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|---------|
| `src/components/prediction/PassCutTrendChart.tsx` | **ì‹ ê·œ** â€” í•©ê²©ì»· ì¶”ì´ ì°¨íŠ¸ |
| `src/app/exam/prediction/page.tsx` | ì°¨íŠ¸ ì„¹ì…˜ ì¶”ê°€ |

---

## F-05. ë¬¸í•­ë³„ ì •ë‹µë¥  + ê³ ë‚œë„ ë¬¸í•­ ë¶„ì„

### 5.1 í˜„ì¬ ìƒíƒœ ë¶„ì„

**êµ¬í˜„ë˜ì–´ ìˆëŠ” ê²ƒ:**
- `UserAnswer` í…Œì´ë¸”ì— ì‚¬ìš©ìë³„ ë¬¸í•­ë³„ ì •ë‹µ ì—¬ë¶€(`isCorrect`) ì €ì¥ë¨
- `result/route.ts`ì—ì„œ ê°œì¸ ë‹µì•ˆ ë°˜í™˜ (ì •ë‹µ/ì˜¤ë‹µë§Œ, ì „ì²´ ì •ë‹µë¥ ì€ ì—†ìŒ)

**ë¯¸êµ¬í˜„:**
- ì „ì²´ ì°¸ì—¬ì ê¸°ë°˜ ë¬¸í•­ë³„ ì •ë‹µë¥  ì§‘ê³„
- ê³ ë‚œë„/ì €ë‚œë„ ë¬¸í•­ ë¶„ë¥˜
- ì •ë‹µë¥  ê¸°ë°˜ ë¶„ì„ ì°¨íŠ¸

### 5.2 ì •ë‹µë¥  ê³„ì‚° ë¡œì§

```typescript
// ë¬¸í•­ë³„ ì •ë‹µë¥  = í•´ë‹¹ ë¬¸í•­ ì •ë‹µì ìˆ˜ / í•´ë‹¹ ë¬¸í•­ ì‘ë‹µì ìˆ˜ Ã— 100

// SQL (Raw Query ì‚¬ìš© â€” ì„±ëŠ¥ ìµœì í™”)
SELECT
  ua.subjectId,
  ua.questionNumber,
  COUNT(*) AS totalAnswered,
  SUM(CASE WHEN ua.isCorrect = 1 THEN 1 ELSE 0 END) AS correctCount,
  ROUND(
    SUM(CASE WHEN ua.isCorrect = 1 THEN 1 ELSE 0 END) * 100.0 / COUNT(*),
    1
  ) AS correctRate
FROM UserAnswer ua
JOIN Submission s ON ua.submissionId = s.id
WHERE s.examId = ?
  AND s.examType = ?
GROUP BY ua.subjectId, ua.questionNumber
ORDER BY ua.subjectId, ua.questionNumber;
```

### 5.3 ê³ ë‚œë„ ë¬¸í•­ ê¸°ì¤€

| ì •ë‹µë¥  ë²”ìœ„ | ë¶„ë¥˜ | í‘œì‹œ |
|-----------|------|------|
| 80% ì´ìƒ | ì‰¬ìš´ ë¬¸í•­ | ì´ˆë¡ìƒ‰ |
| 60~79% | ë³´í†µ ë¬¸í•­ | ê¸°ë³¸ìƒ‰ |
| 40~59% | ì–´ë ¤ìš´ ë¬¸í•­ | ì£¼í™©ìƒ‰ |
| 40% ë¯¸ë§Œ | **ê³ ë‚œë„ ë¬¸í•­** | **ë¹¨ê°„ìƒ‰** + ğŸ”¥ ì•„ì´ì½˜ |

### 5.4 API ë³€ê²½

#### ê¸°ì¡´ `GET /api/result` ì‘ë‹µ í™•ì¥

```typescript
// ê¸°ì¡´ scores[].answers ë°°ì—´ì— correctRate ì¶”ê°€
interface AnswerDetail {
  questionNumber: number;
  selectedAnswer: number;
  isCorrect: boolean;
  correctAnswer: number | null;
  correctRate: number;         // **ì‹ ê·œ** â€” ì „ì²´ ì •ë‹µë¥  (%)
  difficultyLevel: string;     // **ì‹ ê·œ** â€” "EASY" | "NORMAL" | "HARD" | "VERY_HARD"
}

// ì‹ ê·œ: ê³¼ëª©ë³„ ì •ë‹µë¥  ìš”ì•½
interface SubjectCorrectRateSummary {
  subjectId: number;
  subjectName: string;
  averageCorrectRate: number;   // ê³¼ëª© í‰ê·  ì •ë‹µë¥ 
  hardestQuestion: number;      // ì •ë‹µë¥  ìµœì € ë¬¸í•­ë²ˆí˜¸
  hardestRate: number;          // ì •ë‹µë¥  ìµœì € ê°’
  easiestQuestion: number;      // ì •ë‹µë¥  ìµœê³  ë¬¸í•­ë²ˆí˜¸
  easiestRate: number;          // ì •ë‹µë¥  ìµœê³  ê°’
  myCorrectOnHard: number;      // ê³ ë‚œë„ ë¬¸í•­ ì¤‘ ë‚´ê°€ ë§íŒ ìˆ˜
  myWrongOnEasy: number;        // ì‰¬ìš´ ë¬¸í•­ ì¤‘ ë‚´ê°€ í‹€ë¦° ìˆ˜
}
```

### 5.5 ì‚¬ìš©ì í™”ë©´

#### ì±„ì ê²°ê³¼ ë¶„ì„ í˜ì´ì§€ â€” ì •ì˜¤í‘œ ì„¹ì…˜ (07 ë¬¸ì„œì˜ 4.3 ì •ì˜¤í‘œì™€ í†µí•©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì •ì˜¤í‘œ â€” ë¬¸í•­ë³„ ì •ë‹µ/ì˜¤ë‹µ + ì •ë‹µë¥  ë¶„ì„                     â”‚
â”‚                                                          â”‚
â”‚  [í—Œë²•] [í˜•ì‚¬ë²•] [ê²½ì°°í•™]                                  â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ë²ˆí˜¸ â”‚ ë‚´ ë‹µ â”‚ ì •ë‹µ  â”‚ ê²°ê³¼  â”‚ ì •ë‹µë¥   â”‚ ë‚œì´ë„    â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚  1 â”‚  â‘¡   â”‚  â‘¡   â”‚  âœ…  â”‚ 87.3%  â”‚          â”‚        â”‚
â”‚  â”‚  2 â”‚  â‘¢   â”‚  â‘    â”‚  âŒ  â”‚ 45.1%  â”‚ âš  ì–´ë ¤ì›€  â”‚        â”‚
â”‚  â”‚  3 â”‚  â‘    â”‚  â‘    â”‚  âœ…  â”‚ 23.8%  â”‚ ğŸ”¥ê³ ë‚œë„  â”‚        â”‚
â”‚  â”‚  4 â”‚  â‘£   â”‚  â‘¡   â”‚  âŒ  â”‚ 91.2%  â”‚ ğŸ˜¥ ì‰¬ìš´ë¬¸ì œâ”‚        â”‚
â”‚  â”‚ ...â”‚      â”‚      â”‚      â”‚        â”‚          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                          â”‚
â”‚  ë²”ë¡€: âœ… ì •ë‹µ  âŒ ì˜¤ë‹µ                                   â”‚
â”‚       ğŸ”¥ ê³ ë‚œë„(40%ë¯¸ë§Œ) â€” ë‚´ê°€ ë§íˆë©´ ê²½ìŸë ¥ UP           â”‚
â”‚       ğŸ˜¥ ì‰¬ìš´ë¬¸ì œ ì˜¤ë‹µ â€” ì‹¤ìˆ˜ ë°©ì§€ í•„ìš”                     â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“Š ë¶„ì„ ìš”ì•½                                      â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  ê³¼ëª© í‰ê·  ì •ë‹µë¥ : 67.3%                            â”‚   â”‚
â”‚  â”‚  ê°€ì¥ ì–´ë ¤ìš´ ë¬¸í•­: 18ë²ˆ (ì •ë‹µë¥  15.2%) â€” ë‚´ ë‹µ: âœ…   â”‚   â”‚
â”‚  â”‚  ê°€ì¥ ì‰¬ìš´ ë¬¸í•­: 7ë²ˆ (ì •ë‹µë¥  95.8%) â€” ë‚´ ë‹µ: âœ…     â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  ê³ ë‚œë„ ë¬¸í•­(40%â†“) 5ë¬¸í•­ ì¤‘ 3ë¬¸í•­ ì •ë‹µ (60%)        â”‚   â”‚
â”‚  â”‚  ì‰¬ìš´ ë¬¸í•­(80%â†‘) 8ë¬¸í•­ ì¤‘ 1ë¬¸í•­ ì˜¤ë‹µ (87.5%)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì •ë‹µë¥  ë¶„í¬ ë°” ì°¨íŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¬¸í•­ë³„ ì •ë‹µë¥  ë¶„í¬                          [í—Œë²• â–¼]      â”‚
â”‚                                                          â”‚
â”‚  100%â”¤  â–ˆâ–ˆ  â–ˆâ–ˆ        â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ     â–ˆâ–ˆ              â”‚
â”‚   80%â”¤  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ    â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ         â”‚
â”‚   60%â”¤  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ     â”‚
â”‚   40%â”¤â”â”â–ˆâ–ˆâ”â”â–ˆâ–ˆâ”â”â–ˆâ–ˆâ”â–ˆâ–ˆâ”â–ˆâ–ˆâ”â”â–ˆâ–ˆâ”â”â–ˆâ–ˆâ”â”â–ˆâ–ˆâ”â”â–ˆâ–ˆâ”â–ˆâ–ˆâ”â”â–ˆâ–ˆâ”â”â–ˆâ–ˆâ”â”â”  â”‚ â† ê³¼ë½ ê¸°ì¤€ì„ 
â”‚   20%â”¤  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ  â”‚
â”‚    0%â”¤  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ  â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚       1  2  3  4  5  6  7  8  9  10 11 12 ... 20        â”‚
â”‚                                                          â”‚
â”‚  â–  ë‚´ê°€ ë§íŒ ë¬¸í•­  â–  ë‚´ê°€ í‹€ë¦° ë¬¸í•­  â”â” ê³¼ë½ê¸°ì¤€(40%)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- Recharts BarChart
- Xì¶•: ë¬¸í•­ë²ˆí˜¸ (1~20 ë˜ëŠ” 1~40)
- Yì¶•: ì •ë‹µë¥  (0~100%)
- ë§‰ëŒ€ ìƒ‰ìƒ: ë‚´ê°€ ë§íŒ ë¬¸í•­(íŒŒë€ìƒ‰) / ë‚´ê°€ í‹€ë¦° ë¬¸í•­(ë¹¨ê°„ìƒ‰)
- 40% ìˆ˜í‰ ê¸°ì¤€ì„  (ê³¼ë½ ê¸°ì¤€)

### 5.6 ìºì‹± ì „ëµ

ë¬¸í•­ë³„ ì •ë‹µë¥ ì€ ìì£¼ ë°”ë€Œì§€ ì•Šìœ¼ë¯€ë¡œ ì„œë²„ ìºì‹œ ì ìš©:

```typescript
// ìºì‹œ í‚¤: `correctRate:${examId}:${examType}`
// TTL: 120ì´ˆ (2ë¶„)
// ë¬´íš¨í™”: ì¬ì±„ì  ì‹¤í–‰ ì‹œ, ìƒˆ ì œì¶œ ì‹œ

const CORRECT_RATE_CACHE_TTL = 120_000;
let correctRateCache: Map<string, { data: any; at: number }> = new Map();
```

### 5.7 íŒŒì¼ ë³€ê²½ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|---------|
| `src/lib/correctRate.ts` | **ì‹ ê·œ** â€” ë¬¸í•­ë³„ ì •ë‹µë¥  ê³„ì‚° í•¨ìˆ˜ |
| `src/app/api/result/route.ts` | answersì— correctRate, difficultyLevel ì¶”ê°€ |
| `src/components/result/AnswerSheet.tsx` | **ì‹ ê·œ** â€” ì •ì˜¤í‘œ + ì •ë‹µë¥  í…Œì´ë¸” |
| `src/components/result/CorrectRateChart.tsx` | **ì‹ ê·œ** â€” ë¬¸í•­ë³„ ì •ë‹µë¥  ë°” ì°¨íŠ¸ |
| `src/app/exam/result/page.tsx` | ì •ì˜¤í‘œ ì„¹ì…˜ + ì •ë‹µë¥  ì°¨íŠ¸ ì„¹ì…˜ ì¶”ê°€ |

---

## F-06. ìµœì¢…í•©ê²©ì˜ˆì¸¡ â€” ì²´ë ¥ì‹œí—˜ + ë©´ì ‘ ë°˜ì˜ (ì¶”í›„ ê°œë°œ)

> âš ï¸ ì´ ê¸°ëŠ¥ì€ í•„ê¸°í•©ê²© ë°œí‘œ ì´í›„ì— ì˜ë¯¸ê°€ ìˆìœ¼ë¯€ë¡œ **ì¶”í›„ ê°œë°œ** ì˜ˆì •.
> ì•„ë˜ëŠ” ì‚¬ì „ ì„¤ê³„ë§Œ ê¸°ë¡.

### 6.1 ê°œìš”

ê²½ì°° ìµœì¢…í•©ê²©ì€ í•„ê¸°ì‹œí—˜ ì™¸ì— ì²´ë ¥ì‹œí—˜Â·ë©´ì ‘ì‹œí—˜ ì„±ì ì„ í•©ì‚°í•˜ì—¬ ê²°ì •.
í•„ê¸°í•©ê²© ë°œí‘œ í›„ â†’ ì²´ë ¥/ë©´ì ‘ ì ìˆ˜ ì…ë ¥ â†’ ìµœì¢…í•©ê²© ê°€ëŠ¥ì„± ì˜ˆì¸¡.

### 6.2 ê²½ì°° ìµœì¢… ì„±ì  ë°˜ì˜ë¹„ìœ¨

| í•­ëª© | ë°˜ì˜ë¹„ìœ¨ | ë§Œì  | ë¹„ê³  |
|------|---------|------|------|
| í•„ê¸°ì‹œí—˜ | 50% | â€” | í™˜ì‚°ì ìˆ˜ = ì›ì ìˆ˜/250 Ã— 50 |
| ì²´ë ¥ì‹œí—˜ | 25% | 60ì  | 6ì¢…ëª© ê° 10ì  |
| ë©´ì ‘ì‹œí—˜ | 20% | â€” | â€” |
| ê°€ì‚°ì  | 5% ì´ë‚´ | â€” | ìê²©ì¦Â·ê²½ë ¥ |

### 6.3 í•„ìš” ì…ë ¥ í•­ëª©

```
ì²´ë ¥ì‹œí—˜ (6ì¢…ëª©, ê° 10ì , ì´ 60ì ):
  - 100m ë‹¬ë¦¬ê¸°
  - 1000m ë‹¬ë¦¬ê¸°
  - ìœ—ëª¸ì¼ìœ¼í‚¤ê¸°
  - ì¢ŒÂ·ìš° ì•…ë ¥
  - íŒ”êµ½í˜€í´ê¸°

ë©´ì ‘ì‹œí—˜:
  - ë©´ì ‘ì ìˆ˜ ì§ì ‘ ì…ë ¥ (ì •í™•í•œ ì ìˆ˜ë¥¼ ì•„ëŠ” ê²½ìš°)
  - ë˜ëŠ” ë©´ì ‘ë“±ê¸‰ ì„ íƒ (A/B/C/D/E â€” ì¶”ì •ì ìˆ˜ ìë™ ê³„ì‚°)
```

### 6.4 DB ìŠ¤í‚¤ë§ˆ (ì‚¬ì „ ì„¤ê³„)

```prisma
model FinalPrediction {
  id              Int      @id @default(autoincrement())
  submissionId    Int      @unique
  userId          Int
  fitnessScore    Float?   // ì²´ë ¥ì‹œí—˜ ì ìˆ˜ (0~60)
  interviewScore  Float?   // ë©´ì ‘ì‹œí—˜ ì ìˆ˜
  interviewGrade  String?  // ë©´ì ‘ë“±ê¸‰ (A~E)
  finalScore      Float?   // ìµœì¢… í™˜ì‚°ì ìˆ˜
  finalRank       Int?     // ìµœì¢… ìˆœìœ„
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  submission  Submission @relation(fields: [submissionId], references: [id])
  user        User       @relation(fields: [userId], references: [id])
}
```

### 6.5 ê°œë°œ ì‹œì 

- **íŠ¸ë¦¬ê±°**: í•„ê¸°í•©ê²© ë°œí‘œì¼ (2026.03.20) ì´í›„
- **ì‚¬ì „ ì¤€ë¹„**: DB ìŠ¤í‚¤ë§ˆë§Œ ë¯¸ë¦¬ ì¶”ê°€í•´ë‘ê³ , ê¸°ëŠ¥ì€ ë°œí‘œ í›„ í™œì„±í™”
- **ì˜ˆìƒ ì†Œìš”**: 3~5ì¼

---

## ê°œë°œ ìˆœì„œ ë° ì˜ì¡´ ê´€ê³„

```
Phase A: ê¸°ë°˜ ì‘ì—… (DB ìŠ¤í‚¤ë§ˆ)
â”œâ”€â”€ A-1: Prisma ìŠ¤í‚¤ë§ˆ ì¶”ê°€ (RescoreEvent, RescoreDetail,
â”‚         PassCutRelease, PassCutSnapshot)
â””â”€â”€ A-2: ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰

Phase B: F-05 ë¬¸í•­ë³„ ì •ë‹µë¥  (ì˜ì¡´ ì—†ìŒ, ë…ë¦½ ê°œë°œ ê°€ëŠ¥)
â”œâ”€â”€ B-1: correctRate.ts ì •ë‹µë¥  ê³„ì‚° í•¨ìˆ˜
â”œâ”€â”€ B-2: result API ì‘ë‹µ í™•ì¥
â”œâ”€â”€ B-3: AnswerSheet ì •ì˜¤í‘œ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ B-4: CorrectRateChart ë°” ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â””â”€â”€ B-5: result í˜ì´ì§€ì— ì„¹ì…˜ ì¶”ê°€

Phase C: F-01 ì •ë‹µí‚¤ ë³€ê²½ ì•Œë¦¼ (DB ìŠ¤í‚¤ë§ˆ ì˜ì¡´)
â”œâ”€â”€ C-1: scoring.ts rescoreExam() í™•ì¥
â”œâ”€â”€ C-2: admin/answers API ìˆ˜ì • (ë³€ê²½ ì‚¬ìœ )
â”œâ”€â”€ C-3: notifications API (ì¡°íšŒ, ì½ìŒ ì²˜ë¦¬)
â”œâ”€â”€ C-4: NotificationBell ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ C-5: RescoreNotificationModal ì»´í¬ë„ŒíŠ¸
â””â”€â”€ C-6: ê´€ë¦¬ì ë‹µì•ˆ í˜ì´ì§€ ìˆ˜ì •

Phase D: F-02 ë‹¨ê³„ë³„ í•©ê²©ì»· ë°œí‘œ (DB ìŠ¤í‚¤ë§ˆ ì˜ì¡´)
â”œâ”€â”€ D-1: admin/pass-cut-release API
â”œâ”€â”€ D-2: pass-cut-history ì‚¬ìš©ì API
â”œâ”€â”€ D-3: ê´€ë¦¬ì í•©ê²©ì»· ë°œí‘œ í˜ì´ì§€
â”œâ”€â”€ D-4: PassCutHistoryTable ì»´í¬ë„ŒíŠ¸
â””â”€â”€ D-5: AdminSidebar ë©”ë‰´ ì¶”ê°€

Phase E: F-04 í•©ê²©ì»· ë³€ë™ ì¶”ì´ ê·¸ë˜í”„ (F-02 ì˜ì¡´)
â”œâ”€â”€ E-1: PassCutTrendChart ì»´í¬ë„ŒíŠ¸
â””â”€â”€ E-2: prediction í˜ì´ì§€ì— ì°¨íŠ¸ ì„¹ì…˜ ì¶”ê°€

Phase F: F-03 SNS ê³µìœ  (ì˜ì¡´ ì—†ìŒ, ë…ë¦½ ê°œë°œ ê°€ëŠ¥)
â”œâ”€â”€ F-1: share/data API
â”œâ”€â”€ F-2: share/og-image API (Satori ê¸°ë°˜)
â”œâ”€â”€ F-3: ShareCard ë””ìì¸ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ F-4: ShareButton ë“œë¡­ë‹¤ìš´ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ F-5: ì¹´ì¹´ì˜¤ SDK ì—°ë™
â”œâ”€â”€ F-6: result í˜ì´ì§€ì— ê³µìœ  ë²„íŠ¼ ì¶”ê°€
â””â”€â”€ F-7: prediction í˜ì´ì§€ì— ê³µìœ  ë²„íŠ¼ ì¶”ê°€

Phase G: F-06 ìµœì¢…í•©ê²©ì˜ˆì¸¡ (ì¶”í›„)
â””â”€â”€ í•„ê¸°í•©ê²© ë°œí‘œ í›„ ê°œë°œ ì‹œì‘
```

### ì˜ì¡´ ê´€ê³„ ë‹¤ì´ì–´ê·¸ë¨

```
A (DB ìŠ¤í‚¤ë§ˆ) â”€â”€â†’ C (ì •ë‹µí‚¤ ë³€ê²½ ì•Œë¦¼)
             â”€â”€â†’ D (ë‹¨ê³„ë³„ í•©ê²©ì»·) â”€â”€â†’ E (ì¶”ì´ ê·¸ë˜í”„)

B (ë¬¸í•­ë³„ ì •ë‹µë¥ ) : ë…ë¦½
F (SNS ê³µìœ ) : ë…ë¦½

G (ìµœì¢…í•©ê²©ì˜ˆì¸¡) : ì¶”í›„
```

### ë³‘ë ¬ ê°œë°œ ê°€ëŠ¥ ì¡°í•©

```
ë™ì‹œ ì°©ìˆ˜ ê°€ëŠ¥:
  [A + B + F]  â† 3ê°œ ë™ì‹œ ì‹œì‘ ê°€ëŠ¥

A ì™„ë£Œ í›„:
  [C + D]  â† 2ê°œ ë™ì‹œ ì‹œì‘ ê°€ëŠ¥

D ì™„ë£Œ í›„:
  [E]
```

---

## ì‹ ê·œ íŒŒì¼ ì „ì²´ ëª©ë¡

### API ë¼ìš°íŠ¸

| íŒŒì¼ | ê¸°ëŠ¥ |
|------|------|
| `src/app/api/notifications/rescore/route.ts` | ì¬ì±„ì  ì•Œë¦¼ ì¡°íšŒ |
| `src/app/api/notifications/rescore/read/route.ts` | ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ |
| `src/app/api/admin/pass-cut-release/route.ts` | í•©ê²©ì»· ë°œí‘œ (ê´€ë¦¬ì) |
| `src/app/api/pass-cut-history/route.ts` | í•©ê²©ì»· ë°œí‘œ ì´ë ¥ (ì‚¬ìš©ì) |
| `src/app/api/share/data/route.ts` | ê³µìœ  ë°ì´í„° ì¡°íšŒ |
| `src/app/api/share/og-image/route.tsx` | OG ì´ë¯¸ì§€ ë™ì  ìƒì„± |

### ê´€ë¦¬ì í˜ì´ì§€

| íŒŒì¼ | ê¸°ëŠ¥ |
|------|------|
| `src/app/admin/pass-cut/page.tsx` | í•©ê²©ì»· ë°œí‘œ ê´€ë¦¬ |

### ì»´í¬ë„ŒíŠ¸

| íŒŒì¼ | ê¸°ëŠ¥ |
|------|------|
| `src/components/layout/NotificationBell.tsx` | ì•Œë¦¼ ë±ƒì§€ (í—¤ë”) |
| `src/components/notification/RescoreNotificationModal.tsx` | ì¬ì±„ì  ì•Œë¦¼ ìƒì„¸ |
| `src/components/prediction/PassCutHistoryTable.tsx` | í•©ê²©ì»· ë°œí‘œ ì´ë ¥ í…Œì´ë¸” |
| `src/components/prediction/PassCutTrendChart.tsx` | í•©ê²©ì»· ì¶”ì´ ì°¨íŠ¸ |
| `src/components/result/AnswerSheet.tsx` | ì •ì˜¤í‘œ + ì •ë‹µë¥  í…Œì´ë¸” |
| `src/components/result/CorrectRateChart.tsx` | ë¬¸í•­ë³„ ì •ë‹µë¥  ë°” ì°¨íŠ¸ |
| `src/components/share/ShareButton.tsx` | ê³µìœ  ë²„íŠ¼ ë“œë¡­ë‹¤ìš´ |
| `src/components/share/ShareCard.tsx` | ê³µìœ  ì¹´ë“œ ë””ìì¸ |

### ë¼ì´ë¸ŒëŸ¬ë¦¬

| íŒŒì¼ | ê¸°ëŠ¥ |
|------|------|
| `src/lib/correctRate.ts` | ë¬¸í•­ë³„ ì •ë‹µë¥  ê³„ì‚° |
| `src/lib/kakao.ts` | ì¹´ì¹´ì˜¤ SDK ë˜í¼ |

### DB ìŠ¤í‚¤ë§ˆ

| ëª¨ë¸ | ê¸°ëŠ¥ |
|------|------|
| `RescoreEvent` | ì¬ì±„ì  ì´ë²¤íŠ¸ |
| `RescoreDetail` | ì‚¬ìš©ìë³„ ì ìˆ˜ ë³€ë™ ìƒì„¸ |
| `PassCutRelease` | í•©ê²©ì»· ë°œí‘œ ì´ë²¤íŠ¸ |
| `PassCutSnapshot` | í•©ê²©ì»· ìŠ¤ëƒ…ìƒ· (ì§€ì—­Ã—ìœ í˜•) |

---

## íŒ¨í‚¤ì§€ ì¶”ê°€

```bash
# SNS ê³µìœ  â€” ì´ë¯¸ì§€ ìƒì„±
npm install html2canvas

# ì¹´ì¹´ì˜¤ SDK íƒ€ì… (ì„ íƒ)
npm install -D @types/kakao.js
```

> `@vercel/og` (Satori)ëŠ” Next.js ë‚´ì¥ì´ë¯€ë¡œ ë³„ë„ ì„¤ì¹˜ ë¶ˆí•„ìš”.
> `next/og`ì—ì„œ `ImageResponse` import ê°€ëŠ¥.

---

## í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€

```env
# ì¹´ì¹´ì˜¤ JavaScript ì•± í‚¤ (ê³µìœ  ê¸°ëŠ¥ìš©)
NEXT_PUBLIC_KAKAO_JS_KEY=

# (ì„ íƒ) ì¹´ì¹´ì˜¤ REST API í‚¤
KAKAO_REST_API_KEY=
```
